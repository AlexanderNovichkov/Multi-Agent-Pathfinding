#Multi-Agent Pathfinding
Задано прямоугольное поле, разбитое на одинаковые квадратные клетки. 
Некоторые клетки заблокированы, остальные свободны.
Каждому агенту необходимо добраться от своей стартовой позиции до финишной. \
Агент умеет совершать два вида действий: перемещаться в соседнюю свободную клетку или оставаться на месте какое-то время. 
Необходимо для каждого агента найти его последовательность действий, при выполнении которых он достигнет своего финиша, при этом не возникнет вершинных и реберных конфликтов.
* Вершинный конфликт - разные агенты находятся в одной клетке в один и тот же момент времени.
* Реберный конфликт - два агента, находящиеся в соседних клетках, меняются местами. 

### Linux и Mac
Release сборка:
```bash
cd Build
cd Release
cmake ../../ -DCMAKE_BUILD_TYPE="Release"
make
make install

Запуск:
```bash
cd ../../Bin/{Debug|Release}/
./Alexander_Novichkov_ASearch ../../Examples/example.xml
```

### Windows
Release сборка:
```cmd
cd Build
cd Release
set PATH
cmake ../../ -DCMAKE_BUILD_TYPE="Release" -G "MinGW Makefiles"
mingw32-make
mingw32-make install
```
Запуск:
```cmd
cd ../../Bin/{Debug|Release}/
Alexander_Novichkov_ASearch.exe ../../Examples/example.xml
```

### Формат входных данных
На вход поступает XML файл в качестве аргумента командной строки. 

### Формат выходных данных
В консоль выводится информация о работе программы и генерируется выходной XML файл.

### Формат входного XML файла
Имеет корневой тег root и содержит:
* agents - описывает агентов. 
    * agentdata - такой тег должен быть для каждого агента. Имеет атрибуты "start.x", "start.y", "finish.x", "finish.y".
* map - содержит описание карты.
    * width, height - ширина и высота карты. 
    * cellsize - размер одной ячейки.
    * startx, starty - стартовая точка.
    * finishx, finishy - конечная точка.
    * grid - таблица, описывающая карту. Номер столбца соответствует x координате, номер строки соответствует y координате. "0" - свободная клетка, "1" - препятствие.
* algorithm
    * metrictype -  эвристика для оценки расстояния. Поддерживаются "euclidean", "manhattan", "chebyshev", "diagonal".
    * hweight - вес эвристики при подсчете f вершины при работе алгоритма A*.
    * breakingties - определяет порядок раскрытия вершин при равных значениях f. Поддерживаются "g-min" и "g-max".
    * agentpriority - определяет порядок, в котором будут искаться траектории для агентов. Поддерживаются "fifo" - порядок как во входном XML файле, "heuristic-min" / "heuristic-max" - первыми идут агенты, у которых значение эвристической функции от старта до финиша минимально/максимально, "random" - случайный порядок.
    * blockstartduration - определяет время, в течение которого стартовая вершина агента будет заблокирована для всех агентов с более высоким приоритетом. Поддерживаются любые натуральные числа, включая ноль.
* options
    * loglevel - изменяет количество выводимой информации. Поддерживаются значения 0,  0.5, 1, 1.5, 2.
    * logpath - путь до папки, в которой будет сгенерирован выходной XML файл.
    * logfilename - название выходного файла. 
        

Пример входного файла: [example.xml](Examples/example.xml).
    
 ### Формат выходного XML файла
Создается при параметре loglevel > 0.
Имеет корневой тег root и содержит:
* log
    * summary (при loglevel >= 0.5) - содержит информацию о том, найдено ли решение, стоимость решения - сумма времени исполнения траекторий всех агентов, суммарное время поиска.
    * agent (при loglevel >= 1) - такой тег есть для каждого агента. Атрибут "number" указывает номер агента.
        * summary (при loglevel >= 1) - содержит атрибуты с информацией о том, найдена ли траектория для этого агента, время, необходимое для выполнения всех действий траектории, информацию о работе алгоритма A* для этого агента: количество шагов, число созданных вершин, время работы.
        * trajectory (при loglevel >= 1.5) - содержит траекторию агента, в виде последовательности его действий.
            * action ( при loglevel >= 1.5) - содержит атрибуты "start_time" - время время начала движения агента, и "finish.x", "finish.y" - клетка, в которую агент переходит.

Пример выходного файла: [example_log.xml](Examples/example_log.xml).


### Эвристики
Пусть dx, dy равны модулю разности координат между текущей позицией и финишем, a - длина стороны клетки карты, d - длина диагонали.
Тогда эвристики выражаются так:
* Euclidean: a * sqrt(dx * dx + dy * dy)
* Manhattan: a * (dx + dy)
* Chebyshev: max(dx, dy)
* Diagonal: a * |dx – dy| + d * min(dx, dy)

### Визуализатор
Визаулизатор visualization.py находится в папке Scripts. Он принимает первым аргументом выходной xml файл, который был сгенерирован основной программой, loglevel должен быть >= 1.5.
Например:
```cmd
python3 Scripts/visualization.py Examples/example_log.xml
```


